import {leftKey, rightKey} from './keys.js'
import Body from './body.js'
import create from './create.js'

export default class Guy extends Body {
  constructor (x, y) {
    super(create('svg'))
    this.element.innerHTML = `
    <svg id="guy" width="26.95" height="47" viewBox="0 0 600 800" xmlns="http://www.w3.org/2000/svg">
      <g id="inner-guy">
        <path d="M324.45 628.77L350.02 681.21H194.56L219.98 628.77H194.56L220.47 575.32H323.95L350.02 628.77H324.45Z" fill="#CE3F8F"/>
        <path d="M221.64 681.21H322.95V708.54C322.95 736.5 300.25 759.19 272.3 759.19C244.34 759.19 221.65 736.49 221.65 708.54V681.21H221.64Z" fill="#6D3AC6"/>
        <path d="M538.23 628.77L563.8 681.21H408.34L433.76 628.77H408.34L434.25 575.32H537.73L563.8 628.77H538.23Z" fill="#CE3F8F"/>
        <path d="M435.42 681.21H536.73V708.54C536.73 736.5 514.03 759.19 486.08 759.19C458.12 759.19 435.43 736.49 435.43 708.54V681.21H435.42Z" fill="#6D3AC6"/>
        <path d="M534.53 517.79L573.61 575.32H184.75L223.62 517.67H184.75L223.62 459.28H197.71L223.62 401.08L327.15 416.17L534.53 415.59L560.24 459.28H534.46L534.53 459.39L573.61 517.67H534.46L534.53 517.79Z" fill="#FFDD00"/>
        <path d="M215.25 471.85L236.59 491.92L272.87 457.72L308.11 492.7L344.12 458.5L380.13 492.7L415.37 457.72L451.39 491.92L487.66 457.46L494.37 464.17L517.48 485.99L538.98 466.02L547.31 478.44L517.74 508.01L517.56 507.83L487.14 477.67L451.13 513.68L415.11 477.67L379.1 513.68L343.86 478.45L307.85 512.65L272.87 477.93L236.85 513.94L206.75 484.63" fill="black"/>
        <path d="M223.6 401.08C223.6 384.53 220.57 362.73 212.8 350.3C202.44 333.72 183.78 322.32 147.51 322.06L146.99 342.79C159.94 342.27 172.38 343.57 183 350.3C192.07 356 199.58 365.33 205.28 380.87C173.67 369.99 155.53 373.36 142.84 381.65C136.1 386.05 130.92 391.5 126 397.45L140.25 410.66C141.03 409.36 142.06 408.33 142.84 407.29C158.39 388.89 176.26 389.41 195.18 399.52C153.98 419.21 147.51 453.93 149.58 479.06C151.39 479.32 169.79 479.06 169.79 479.06C167.98 454.71 182.75 421.24 219.03 411.4L223.61 401.08H223.6Z" fill="#6D3AC6"/>
        <path d="M547.31 415.85L327.52 416.16L346.93 355.99H327.71L346.93 304.18H527.98L547.31 356.25H527.98L547.31 415.85Z" fill="#1DB9D2"/>
        <path d="M555.36 304.44L322.92 304.7L360.92 226.71H335.13L373.38 151.57L555.36 191.47V304.44Z" fill="#FFDD00"/>
        <path d="M555.36 304.44V191.47C555.36 191.47 622.26 206.53 636.65 243.78C637.69 246.47 638.12 249.36 638.12 252.24C640.83 302.89 555.36 304.44 555.36 304.44Z" fill="#CE3F8F"/>
        <path d="M498.31 178.96C559.2 94.49 589.29 52.73 565.2 32.26C549.4 18.79 526.14 30.17 491.42 56.08C490.12 83.8 485.44 121.87 476.63 174.21L498.31 178.96Z" fill="#008599"/>
        <path d="M472.97 4.79999C440.06 -3.23001 421.06 49.49 373.38 151.57L479.46 174.83C488.27 122.49 493.11 84.21 492.92 54.55C494.22 24.75 489.03 8.68999 472.97 4.79999Z" fill="#1DB9D2"/>
        <path d="M484.67 254.99C498.135 254.99 509.05 244.075 509.05 230.61C509.05 217.145 498.135 206.23 484.67 206.23C471.205 206.23 460.29 217.145 460.29 230.61C460.29 244.075 471.205 254.99 484.67 254.99Z" fill="white"/>
        <path d="M484.67 242.41C491.187 242.41 496.47 237.127 496.47 230.61C496.47 224.093 491.187 218.81 484.67 218.81C478.153 218.81 472.87 224.093 472.87 230.61C472.87 237.127 478.153 242.41 484.67 242.41Z" fill="black"/>
        <path d="M555.36 300.1V304.44H541.54L511.62 291.5C509.31 290.58 506.28 287.2 507.53 284.78C508.28 283.28 511.27 281.49 516.11 283.39L555.36 300.11V300.1Z" fill="black"/>
      </g>
    </svg>`
    this.load(x, y)
    this.height = 40
    this.width = 26.95
    this.speed = 360
    this.vx = 0
    this.vy = 0
  }

  tick (scale) {
    if (leftKey() && !rightKey()) {
      this.vx = -scale(this.speed)
      this.faceLeft = true
    } else if (rightKey() && !leftKey()) {
      this.vx = scale(this.speed)
      this.faceLeft = false
    } else {
      this.vx = 0
    }

    this.walking = leftKey() || rightKey()
  }

  get faceLeft () {
    return !!this._faceLeft
  }

  set faceLeft (value) {
    this._faceLeft = !!value
    this.element.classList.toggle('left', this.faceLeft)
  }

  get walking () {
    return !!this._walking
  }

  set walking (value) {
    this._walking = !!value
    this.element.classList.toggle('walk', this.walking)
  }

  load (x, y) {
    this.x = x
    this.y = y
  }

  toJSON () {
    return [Math.round(this.x), Math.round(this.y)]
  }
}
